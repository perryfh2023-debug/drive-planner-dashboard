/* =========================================================
   Drive Planner Pro Dashboard — Blue Steel v1
   Drop-in styles.css replacement
   ---------------------------------------------------------
   Change colors ONCE here (tokens) to theme the whole app.
   ========================================================= */

:root {
  /* ---------- Brand / Core ---------- */
  --primary: #1F4B8F;
  --primary-pressed: #163A6B;
  --primary-rgb: 31, 75, 143;

  --accent-steel: #2FA7B5; /* sparing */

  /* ---------- Neutrals ---------- */
  --ink: #0F172A;
  --ink-muted: #475569;
  --ink-soft: #64748B;

  /* ---------- Surfaces ---------- */
  --page-bg: #F6F8FC;
  --surface: #FFFFFF;
  --surface-tint: #EAF1FB;
  --surface-tint-2: #DFEAF7;

  --border: #D6E1F2;

  /* ---------- Effects ---------- */
  --shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
  --shadow-sm: 0 1px 3px rgba(15, 23, 42, 0.10);

  /* ---------- Shape ---------- */
  --radius-card: 16px;
  --radius-panel: 14px;
  --radius-control: 12px;
  --radius-chip: 999px;

  /* ---------- Header Gradient ---------- */
  --header-top: #B9CDE7;
  --header-bottom: #96B4D6;

  /* ---------- Link ---------- */
  --link: #1F4B8F;
  --link-hover: #163A6B;
}

/* =========================================================
   BASE RESET / CANVAS
   ========================================================= */

* { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Helvetica, Arial, sans-serif;
  background: var(--page-bg);
  color: var(--ink);
}

#app {
  padding: 12px;
}

/* =========================================================
   TOP BAR (GLOBAL HEADER)
   ========================================================= */

.top-bar {
  position: sticky;
  top: 0;
  z-index: 100;

  padding: 12px;
  border-bottom: 1px solid rgba(15, 23, 42, 0.18);

  background: linear-gradient(to bottom, var(--header-top), var(--header-bottom));
  box-shadow: 0 2px 14px rgba(15, 23, 42, 0.10);

  /* Needed for intensity overlay */
  position: sticky;
}

/* Intensity overlay (driven by --density from JS) */
.top-bar::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(var(--primary-rgb), calc(0.12 * var(--density, 0)));
  pointer-events: none;
}

/* If you use city + weather on one top line, keep it above overlay */
.header-topline {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 14px;
  position: relative;
  z-index: 1;
  margin-bottom: 8px;
}

/* City block */
.top-bar .city {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
  margin-bottom: 0;
  position: relative;
  z-index: 1;
}

.top-bar .city-name {
  font-size: 1.25rem;
  font-weight: 800;
  color: var(--ink);
  letter-spacing: 0.01em;
  text-shadow: 0 1px 0 rgba(255,255,255,0.35);
}

.top-bar .city-sub {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--ink-muted);
}

/* Header weather (optional) */
.header-weather {
  margin: 0;
  padding: 0;
  border: none;
  background: transparent;
  text-align: right;

  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: flex-start;

  max-width: 48%;
  position: relative;
  z-index: 1;
}

.header-weather .wx-line {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 6px;
}

.header-weather img {
  width: 18px;
  height: 18px;
  border-radius: 8px;
}

.header-weather .wx-headline {
  font-size: 0.85rem;
  font-weight: 700;
  color: rgba(15, 23, 42, 0.78);
  line-height: 1.1;
}

.header-weather .wx-meta {
  margin-top: 1px;
  font-size: 0.78rem;
  color: var(--ink-muted);
}

.header-weather .wx-updated {
  margin-top: 2px;
  font-size: 0.68rem;
  color: var(--ink-soft);
  opacity: 0.9;
}

/* Preview header banner (only appears when ?preview=1) */
.preview-banner{
  margin: 8px 0;
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(255,255,255,0.65);
  border: 1px solid rgba(15,23,42,0.12);
}

.preview-banner__headline{
  font-weight: 850;
  font-size: 0.95rem;
  color: rgba(15,23,42,0.92);
}

.preview-banner__tag{
  margin-top: 2px;
  font-size: 0.78rem;
  font-weight: 650;
  color: rgba(15,23,42,0.70);
}

.preview-banner__asof{
  margin-top: 2px;
  font-size: 0.70rem;
  color: rgba(15,23,42,0.55);
}

/* =========================================================
   HEADER VIEW SELECTOR — SEGMENTED CONTROL
   ========================================================= */

.top-bar .views {
  display: flex;
  justify-content: center;
  width: 100%;
  gap: 0;
  padding: 3px;

  background: rgba(255, 255, 255, 0.28);
  border: 1px solid rgba(15, 23, 42, 0.10);
  border-radius: var(--radius-control);

  position: relative;
  z-index: 1;
}

.top-bar .views button {
  background: transparent;
  border: none;

  padding: 7px 12px;
  font-weight: 650;
  color: rgba(15, 23, 42, 0.82);

  border-radius: calc(var(--radius-control) - 4px);
  cursor: pointer;
  font-size: 0.85rem;
}

.top-bar .views button.active {
  background: var(--surface);
  color: var(--ink);
  box-shadow: 0 1px 2px rgba(0,0,0,0.12);
}

.top-bar .views button:not(.active):hover {
  background: rgba(255, 255, 255, 0.35);
}

/* Preview / view header styling */
.view-header {
  margin: 10px 0 12px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(15, 23, 42, 0.10);
  background: rgba(255, 255, 255, 0.55);
}

.view-headline {
  font-size: 1.05rem;
  font-weight: 850;
  color: var(--ink);
  margin-bottom: 2px;
}

.view-tag {
  font-size: 0.80rem;
  font-weight: 600;
  color: var(--ink-muted);
}

/* =========================================================
   VIEW NAVIGATION (IN-VIEW) — back button, etc.
   ========================================================= */

.nav-link {
  display: inline-block;
  margin: 6px 0 10px 0;
  padding: 8px 12px;

  font-size: 0.82rem;
  font-weight: 650;

  background: var(--surface-tint);
  border: 1px solid rgba(15, 23, 42, 0.16);
  border-radius: 10px;

  color: var(--ink);
  cursor: pointer;
}

.nav-link:hover {
  filter: brightness(0.98);
  background: var(--surface-tint-2);
}

/* =========================================================
   WEEK + DAY VIEW CARDS
   ========================================================= */

.stat-primary {
  margin-top: 2px;
  font-size: 0.86rem;
  font-weight: 800;
  color: var(--ink);
}

.stat-secondary {
  margin-top: 2px;
  font-size: 0.8rem;
  font-weight: 600;
  color: rgba(15, 23, 42, 0.72);
  opacity: 0.92;
}

/* Base day container */
.day {
  border-radius: var(--radius-panel);
  padding: 12px 14px;
  margin-bottom: 12px;
  border: 1px solid rgba(15, 23, 42, 0.10);
}

/* Day view base surface */
.day:not(.week-day) {
  background: var(--surface-tint);
  box-shadow: none;
  position: relative;
}

/* Day title */
.day h2 {
  margin: 2px 0 6px 0;
  font-size: 1.05rem;
  font-weight: 750;
  color: var(--ink);
}

/* Day summary lines */
.day:not(.week-day) > .muted {
  font-size: 0.8rem;
  color: var(--ink-muted);
  line-height: 1.3;
}

/* Pull summary closer */
.day:not(.week-day) > .muted + .muted {
  margin-top: -2px;
}

/* Left edge indicator driven by attendance (day view) */
.day:not(.week-day)::before {
  content: "";
  position: absolute;
  left: 0;
  top: 10px;
  bottom: 10px;
  width: 6px;
  border-radius: 6px;
  background: rgba(var(--primary-rgb), calc(0.30 + 0.75 * var(--day-density, 0)));
}

/* Week cards (On the Horizon) */
.week-day {
  border: 1px solid rgba(15, 23, 42, 0.14);

  /* Diagonal bloom intensity */
  background: linear-gradient(
    135deg,
    rgba(var(--primary-rgb), calc(0.08 + 0.55 * var(--density, 0))) 0%,
    rgba(var(--primary-rgb), calc(0.04 + 0.25 * var(--density, 0))) 55%,
    var(--surface-tint) 100%
  );
}

/* Week cards only (they're .day.clickable but not .week-day?) */
.day.clickable:not(.week-day) {
  background: linear-gradient(
    to right,
    rgba(var(--primary-rgb), calc(0.12 + 0.60 * var(--density, 0))) 0%,
    rgba(var(--primary-rgb), calc(0.06 + 0.25 * var(--density, 0))) 45%,
    var(--surface-tint) 100%
  );
}

/* Clickable affordance */
.day.clickable,
.month-day.clickable {
  cursor: pointer;
}

.day.clickable:hover,
.month-day.clickable:hover {
  filter: brightness(0.97);
}

.day.clickable:active,
.month-day.clickable:active {
  filter: brightness(0.92);
}

/* Add subtle edge so clickable items read tappable */
.month-day.clickable,
.day.clickable {
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.35);
}

/* =========================================================
   MUTED TEXT
   ========================================================= */

.muted {
  font-size: 0.8rem;
  color: var(--ink-muted);
}

/* =========================================================
   DAY VIEW EVENT LINKS
   ========================================================= */

/* Known-error area: link alignment/spacing sometimes feels off.
   Fix applied here (block-like link spacing). */
.card a {
  color: var(--link);
  text-decoration: underline;
  font-weight: 650;

  display: inline-block;
  margin-top: 6px;
}

.card a:hover {
  color: var(--link-hover);
}

/* =========================================================
   EVENT CARDS – VISUAL STRUCTURE & CHARACTER
   ========================================================= */

.card {
  /* Default (fallback) category accent */
  --accent: var(--primary);

  background: var(--surface);
  border: 1px solid rgba(15, 23, 42, 0.10);
  border-radius: var(--radius-card);

  padding: 14px 16px;
  margin-bottom: 12px;
  position: relative;

  box-shadow: var(--shadow-sm);
}

/* Accent stripe */
.card::before {
  content: "";
  position: absolute;
  left: 0;
  top: 12px;
  bottom: 12px;
  width: 4px;
  border-radius: 4px;
  background: var(--accent);
  opacity: 0.35;
}

/* Title */
.card h3 {
  font-size: 1.05rem;
  font-weight: 750;
  margin: 0 0 6px 0;
  color: rgba(15, 23, 42, 0.90);
}

/* Metadata */
.card .muted {
  color: rgba(15, 23, 42, 0.62);
  line-height: 1.4;
}

/* Category label color */
.card .muted:first-child {
  color: var(--accent);
  font-weight: 700;
}

/* Notes callout (rendered via inline background in JS) */
.card div[style*="background"] {
  background: rgba(234, 241, 251, 0.85) !important;
  border-left: 3px solid rgba(var(--primary-rgb), 0.35);
  border-radius: 10px;
  padding: 10px 12px;
  color: rgba(15, 23, 42, 0.75);
}

/* Divider line (rendered via inline height) */
.card div[style*="height: 1px"] {
  background: rgba(15, 23, 42, 0.12) !important;
}

/* Keep grouped sections tight */
.card > div {
  margin-top: 2px;
}

/* Category accents */
.card[data-category="CONCERTS"] { --accent: #7C5CFF; }
.card[data-category="SPORTS"]   { --accent: #EF4444; }
.card[data-category="FESTIVALS"]{ --accent: #F97316; }
.card[data-category="THEATER"]  { --accent: #EC4899; }
.card[data-category="COMEDY"]   { --accent: #EAB308; }

/* =========================================================
   EXTENDED OUTLOOK (MONTH VIEW)
   ========================================================= */

.month-panel {
  background: var(--surface-tint);
  border: 1px solid rgba(15, 23, 42, 0.14);
  border-radius: var(--radius-panel);
  padding: 12px;
  box-shadow: var(--shadow);
}

/* Month header band */
.month-header {
  background: rgba(255, 255, 255, 0.55);
  border-bottom: 1px solid rgba(15, 23, 42, 0.12);

  margin: -12px -12px 6px -12px;
  padding: 10px 12px;

  border-radius: var(--radius-panel) var(--radius-panel) 0 0;
}

.month-header .title {
  font-weight: 850;
  color: var(--ink);
  margin: 0;
  letter-spacing: 0.01em;
}

.month-header .subtitle {
  font-size: 0.75rem;
  font-weight: 650;
  color: rgba(15, 23, 42, 0.70);
  opacity: 0.9;
  margin: 0;
}

/* Title + range on one line */
.month-headline-row {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.month-headline-row .subtitle {
  white-space: nowrap;
}

/* Weekday row + week rows */
.week-days {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 6px;
  margin-bottom: 10px;
}

.month-header .week-days {
  margin-bottom: 0;
}

/* Weekday labels */
.weekday {
  font-size: 0.72rem;
  font-weight: 850;
  color: var(--ink);
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  opacity: 0.92;
  min-width: 0;
}

/* Individual day cell */
.month-day {
  position: relative;
  min-height: 46px;
  padding: 6px 8px;
  border-radius: 12px;

  display: flex;
  flex-direction: column;
  justify-content: space-between;

  border: 1px solid rgba(15, 23, 42, 0.10);

  /* Day-level intensity */
  background: linear-gradient(
    to bottom,
    rgba(var(--primary-rgb), calc(0.10 + 0.45 * var(--density, 0))),
    rgba(var(--primary-rgb), calc(0.04 + 0.20 * var(--density, 0)))
  );

  min-width: 0;
}

/* Out-of-range cells */
.month-day.empty {
  visibility: hidden;
}

/* Day number */
.month-day .date-label {
  font-size: 0.80rem;
  font-weight: 850;
  color: var(--ink);
  line-height: 1.1;
}

/* Event count / metrics */
.month-day .metric {
  font-size: 0.70rem;
  line-height: 1.1;
}

.month-day .muted {
  font-size: 0.65rem;
  line-height: 1.1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: rgba(15, 23, 42, 0.72);
}

/* Legend */
.month-legend {
  font-size: 0.72rem;
  margin-top: 8px;
  color: rgba(15, 23, 42, 0.65);
}

/* =========================================================
   WEATHER (DAY + WEEK)
   ========================================================= */

.weather-day {
  margin: 10px 0 8px;
  padding: 10px;

  border-radius: 12px;
  border: 1px solid rgba(15, 23, 42, 0.10);
  background: rgba(255, 255, 255, 0.60);

  display: flex;
  align-items: center;
  gap: 10px;

  box-shadow: var(--shadow-sm);
}

.weather-day img {
  width: 34px;
  height: 34px;
  border-radius: 10px;
}

.weather-day .wx-title {
  font-size: 0.9rem;
  font-weight: 800;
  color: var(--ink);
}

.weather-day .wx-details {
  margin-top: 2px;
  font-size: 0.8rem;
  color: rgba(15, 23, 42, 0.72);
}

.weather-day.wx-bottom {
  margin-top: 12px;
}

.wx-mini {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 6px;

  font-size: 0.78rem;
  color: var(--ink-muted);
  opacity: 0.92;
}

.wx-mini img {
  width: 16px;
  height: 16px;
  border-radius: 8px;
}

/* =========================================================
   RESPONSIVE SAFETY
   ========================================================= */

@media (max-width: 600px) {
  #app { padding: 10px; }

  .top-bar { padding: 10px; }

  .top-bar .views button {
    padding: 7px 10px;
    font-size: 0.82rem;
  }

  .month-day {
    min-height: 40px;
    padding: 5px 6px;
  }

  .month-day .metric { font-size: 0.68rem; }
  .month-day .muted { font-size: 0.62rem; }

  .weather-day {
    padding: 9px;
    gap: 8px;
  }
}


